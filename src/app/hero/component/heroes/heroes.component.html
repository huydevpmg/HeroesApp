<div class="container">
  <h2 class="tile">My Heroes</h2>
  <hr class="mb-4" />

  <!-- Bulk action -->
  <div *ngIf="selectedIds.length > 0" class="mb-3 d-flex justify-content-between align-items-center">
    <span>{{ selectedIds.length }} selected</span>

     <!-- Tag input -->
  <div class="tag-input-box d-flex align-items-center flex-wrap">
    <span
      class="tag-chip me-1 mb-1"
      *ngFor="let tag of bulkTags"
    >
      {{ tag }}
      <span class="remove-tag" (click)="removeBulkTag(tag)">Ã—</span>
    </span>

    <input
      type="text"
      [(ngModel)]="tagInput"
      (keydown.enter)="addBulkTag()"
      placeholder="Add tag"
      class="tag-input-field"
    />

    <button type="button" class="btn btn-outline-primary btn-sm ms-2" (click)="addBulkTag()">
      <i class="bi bi-plus-lg"></i>
    </button>
  </div>
  
    <button class="btn btn-danger btn-sm" (click)="deleteSelectedHeroes()">
      Delete Selected
    </button>
  </div>

  <div *ngIf="loading$ | async" class="text-center py-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <ng-container *ngIf="heroes$ | async as heroes; else noData">
    <div class="row g-4" *ngIf="heroes.length > 0; else noData">
      <div class="col-12 col-md-6 col-lg-4" *ngFor="let hero of heroes">
        <app-hero-card [hero]="hero" [isChecked]="selectedIds.includes(hero._id)" [showCheckbox]="true"
          [canEditTags]="true" [isMyHeroesView]="true" (checkboxChanged)="onCheckboxChange($event)"
          (tagsUpdated)="updateHeroTags(hero._id, $event)">
        </app-hero-card>
      </div>
    </div>
  </ng-container>

  <!-- No Data -->
  <ng-template #noData>
    <p class="text-center text-muted mt-4">No heroes available.</p>
  </ng-template>
</div>